# ğŸ“– WebNovel Summarizer

> AI-powered reading assistant â€” browse, extract, and summarise web novel chapters with one tap

![Platform](https://img.shields.io/badge/Platform-Android-green?style=flat-square&logo=android)
![Language](https://img.shields.io/badge/Language-Kotlin-purple?style=flat-square&logo=kotlin)
![Architecture](https://img.shields.io/badge/Architecture-MVVM-blue?style=flat-square)
![AI](https://img.shields.io/badge/AI-Cerebras%20%2B%20Groq-red?style=flat-square)
![Min SDK](https://img.shields.io/badge/Min%20SDK-API%2028-blue?style=flat-square)

---

## Overview

A specialised Android app that embeds a full-featured web browser â€” pre-configured for 6+ major novel platforms with a 15+ domain ad blocker and light/dark CSS injection â€” and can summarise any chapter with a single tap.

Three summary depths are generated by **Cerebras GPT-OSS-120B** (primary, ultra-fast) with **Groq Llama 3.3 70B** as fallback, using custom system prompts that preserve honorifics, cultivation terminology, skill names, and character names exactly as written. Summaries are stored in an offline library organised as **Novels â†’ Volumes â†’ Chapters** â€” no account, no cloud sync, zero data collection.

---

## âœ¨ Features

| Feature | Description |
|---|---|
| ğŸŒ Smart WebView Browser | Full browser with URL detection, search routing, back/forward, refresh |
| ğŸ“š 6+ Pre-configured Novel Sites | One-tap access to WebNovel, WuxiaWorld, RoyalRoad, BoxNovel, and more |
| ğŸ¤– 3-Level AI Summaries | Short (bullet points), Detailed (paragraphs), Very Detailed (immersive) |
| ğŸš« 15+ Domain Ad Blocker | Blocks ad networks, trackers, popups, and cookie banners |
| ğŸŒ™ Light/Dark Mode CSS Injection | Dark and light reading modes injected via JavaScript |
| ğŸ“‚ Novel Library (3-tier) | Novels â†’ Volumes â†’ Chapters hierarchy with full CRUD |
| ğŸ”Š Text-to-Speech | Chunked TTS with play/pause/stop and progress tracking |
| ğŸ•’ Browsing History | Auto-tracked page visits with swipe-to-delete |
| â­ Bookmarks | One-tap save with duplicate detection |
| ğŸ¯ Manual CSS Selector | Override extraction for problematic pages |
| ğŸ“´ Offline Access | All saved summaries accessible without internet |
| ğŸ” Cerebras + Groq Fallback | Auto-switches to Groq if Cerebras rate-limits |

---

## ğŸ› ï¸ Tech Stack

- **Language:** Kotlin
- **Architecture:** MVVM (ViewModel + StateFlow + Repository)
- **Local DB:** Room Database (5 tables)
- **Primary AI:** Cerebras API â€” GPT-OSS-120B
- **Fallback AI:** Groq API â€” Llama 3.3 70B
- **Networking:** Retrofit 2 + OkHttp 4
- **Async:** Kotlin Coroutines & StateFlow
- **Browser:** Android WebView + JavaScript injection
- **Min SDK:** API 28 (Android 9)
- **Target SDK:** API 36 (Android 14)

---

## ğŸ—ï¸ Architecture

```
app/
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â”œâ”€â”€ AppDatabase.kt
â”‚   â”‚   â”œâ”€â”€ dao/
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryDao.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ BookmarkDao.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ NovelDao.kt
â”‚   â”‚   â”‚   â”œâ”€â”€ VolumeDao.kt
â”‚   â”‚   â”‚   â””â”€â”€ ChapterDao.kt
â”‚   â”‚   â””â”€â”€ entity/
â”‚   â””â”€â”€ remote/
â”‚       â”œâ”€â”€ CerebrasApiService.kt
â”‚       â””â”€â”€ GroqApiService.kt
â”œâ”€â”€ repository/
â”‚   â”œâ”€â”€ SummaryRepository.kt
â”‚   â””â”€â”€ LibraryRepository.kt
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ MainActivity.kt          (Browser)
â”‚   â”œâ”€â”€ ActivitySummary.kt
â”‚   â”œâ”€â”€ ActivityLibrary.kt
â”‚   â”œâ”€â”€ ActivityVolumes.kt
â”‚   â”œâ”€â”€ ActivityChapters.kt
â”‚   â”œâ”€â”€ ActivityHistory.kt
â”‚   â””â”€â”€ ActivityBookmarks.kt
â”œâ”€â”€ viewmodel/
â”‚   â”œâ”€â”€ BrowserViewModel.kt
â”‚   â”œâ”€â”€ SummaryViewModel.kt
â”‚   â””â”€â”€ LibraryViewModel.kt
â””â”€â”€ util/
    â””â”€â”€ ContentHolder.kt         (singleton for large text transfer)
```

---

## ğŸ—„ï¸ Database Schema

```
history_table      â†’ id, url, title, timestamp
bookmarks_table    â†’ id, url, title, timestamp
novels_table       â†’ id, name (UNIQUE)
volumes_table      â†’ id, novel_id (FK), volume_name
chapters_table     â†’ id, volume_id (FK), chapter_name, summary_text, summary_type, timestamp
```

CASCADE delete on all foreign keys â€” deleting a novel removes all its volumes and chapters automatically.

---

## ğŸ’¡ Implementation Highlights

**Multi-Stage Content Extraction**

Content extraction runs a JavaScript pipeline injected directly into the WebView:

```javascript
(function() {
    // Stage 1: Remove noise
    ['script','style','nav','header','footer','aside','.ads','.popup']
      .forEach(sel => document.querySelectorAll(sel).forEach(el => el.remove()));

    // Stage 2: Try 15+ ranked selectors
    const selectors = ['.chapter-content', '.entry-content', '.content',
                       '.novel-content', 'article', 'main', '[role="main"]'];
    let best = null, bestLen = 0;
    selectors.forEach(sel => {
        const el = document.querySelector(sel);
        if (el && el.innerText.length > bestLen) {
            best = el; bestLen = el.innerText.length;
        }
    });

    // Stage 3: Paragraph-density fallback
    if (!best || bestLen < 200) {
        const paras = [...document.querySelectorAll('p')]
            .filter(p => p.innerText.length > 30 && p.querySelectorAll('a').length <= 2);
        if (paras.length) return paras.map(p => p.innerText).join('\n\n');
    }

    return best ? best.innerText.trim() : document.body.innerText.trim();
})()
```

If all automated extraction fails, a manual CSS selector dialog lets the user input any selector (e.g. `.chapter-text`) for the page.

**ContentHolder Pattern**
Android's Intent has a 1MB transaction limit â€” novel chapters easily exceed this. A singleton `ContentHolder` stores content in memory and is accessed by the summary screen directly, bypassing Intent entirely.

```kotlin
object ContentHolder {
    private var content = ""; private var url = ""; private var title = ""

    fun set(content: String, url: String, title: String) {
        this.content = content; this.url = url; this.title = title
    }
    fun get() = Triple(content, url, title)
    fun clear() { content = ""; url = ""; title = "" }
}
```

**Custom Summary Prompts**
The AI is instructed to:
- Keep all honorifics unchanged (-san, -kun, -sama, -sensei, -dono)
- Never translate or alter character/place/skill/technique names
- Preserve cultivation system terminology (Qi Condensation, Golden Core, Nascent Soul)
- Maintain the original point of view and narrative tone
- Quote dialogue verbatim when present in the source

**Chunked TTS**
The TTS engine splits summaries at sentence boundaries into â‰¤4,000-character chunks (the safe Android TTS limit), plays them sequentially, and maintains pause/resume state across chunk boundaries.

---

## ğŸ“¸ Screenshots

<p align="center">
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum1.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum2.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum3.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum4.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum5.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum6.jpg" width="16%"/>
</p>
<p align="center">
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum7.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum8.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum9.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum10.jpg" width="16%"/>
  <img src="https://github.com/sudiptoroy7666-lgtm/portfolio/blob/fbc009ea41d89c1956497af02910183aa3dd1ecc/assets/screenshots/webnovel/sum11.jpg" width="16%"/>
</p>

---

## ğŸŒ Supported Novel Sites

| Site | Genre Focus |
|---|---|
| WebNovel.com | Official translations + original novels |
| WuxiaWorld.com | Chinese fantasy & cultivation stories |
| RoyalRoad.com | Web serials & original fiction |
| BoxNovel.com | Chinese & Korean translations |
| LightNovelPub.com | Light novels & web novels |
| NovelFull.com | Complete novels & translations |

---

## ğŸš€ Getting Started

### Prerequisites
- Android Studio Hedgehog or later
- A [Cerebras API key](https://cloud.cerebras.ai/) (primary)
- A [Groq API key](https://console.groq.com/) (fallback)

### Setup

1. **Clone the repository**
   ```bash
   git clone https://github.com/sudiptoroy7666-lgtm/webnovel-summarizer.git
   cd webnovel-summarizer
   ```

2. **Add API keys in `local.properties`**
   ```properties
   CEREBRAS_API_KEY=your_cerebras_key_here
   GROQ_API_KEY=your_groq_key_here
   ```

3. **Build and run**
   ```bash
   ./gradlew assembleDebug
   ```

> âš ï¸ **Never commit `local.properties`** â€” it is already listed in `.gitignore`.

---

## ğŸ“Š Project Metrics

| Metric | Value |
|---|---|
| Lines of Code | ~8,500 (Kotlin) |
| Activities | 9 |
| Database Tables | 5 |
| AI Models | 2 (Cerebras primary, Groq fallback) |
| Supported Sites | 6+ pre-configured |
| Summary Types | 3 |
| Min SDK | API 28 (Android 9) |
| Target SDK | API 36 (Android 14) |
| APK Size | ~15 MB |

---

## ğŸ”® Future Improvements

- [ ] Batch summarisation across multiple chapters at once
- [ ] Export library to PDF / EPUB formats
- [ ] Multi-model AI support (Claude, Gemini, GPT-4)
- [ ] Custom summary prompt templates
- [ ] Reading progress tracking across novels
- [ ] Chapter navigation shortcuts within the library

---

## ğŸ”’ Privacy

- **No account required** â€” completely anonymous usage
- **No cloud sync** â€” all data stays on device
- **No analytics or tracking** â€” zero telemetry
- **No content on third-party servers** â€” AI calls are direct API requests, content is not stored remotely

---

## ğŸ‘¤ Author

**Sudipta Roy**  
Android Developer | Java & Kotlin  
ğŸ“§ sudiptoroy7666@gmail.com  
ğŸ”— [Portfolio](https://sudiptoroy7666-lgtm.github.io/portfolio/) Â· [LinkedIn](https://www.linkedin.com/in/sudipta-roy-3873512b4/) Â· [GitHub](https://github.com/sudiptoroy7666-lgtm)
